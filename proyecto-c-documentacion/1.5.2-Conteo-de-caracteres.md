# 1.5.2. Conteo de Caracteres

Basándonos en el bucle de E/S de `getchar()`, podemos construir fácilmente programas que realicen análisis simples sobre el texto de entrada, como contar el número total de caracteres.

## Programa para Contar Caracteres (Versión con `while`)

El objetivo es leer caracteres de la entrada uno por uno hasta llegar al final del archivo (`EOF`), y por cada carácter leído, incrementar un contador.

```c
#include <stdio.h>

/* Contar los caracteres de la entrada; 1ra. versión */
int main() {
    long nc; // Usamos 'long' para poder contar números grandes

    nc = 0;
    while (getchar() != EOF) {
        ++nc; // Incrementa el contador por cada carácter
    }

    printf("Total de caracteres: %ld\n", nc); // %ld es para long int.

    return 0;
}
```

### Desglose del Código

1.  **`long nc;`**: Declaramos una variable `nc` (de _number of characters_) de tipo `long`. Usamos `long` en lugar de `int` como medida de seguridad, ya que un `int` podría no ser suficiente para almacenar el número de caracteres de un archivo muy grande. El tamaño de `int` depende del sistema, pero `long` garantiza un rango mayor.
2.  **`nc = 0;`**: Es crucial inicializar el contador a cero antes de empezar.
3.  **`while (getchar() != EOF)`**: Este es el corazón del programa.
    - `getchar()` lee un carácter.
    - El carácter leído se compara con `EOF`.
    - Mientras no sea `EOF`, el bucle continúa. **El carácter en sí no se almacena**, simplemente se descarta después de la comprobación.
4.  **`++nc;`**: Dentro del bucle, por cada carácter que se lee (y que no es `EOF`), incrementamos nuestro contador. `++nc` (pre-incremento) es funcionalmente idéntico a `nc++` (post-incremento) o `nc = nc + 1` en este contexto.
5.  **`printf("%ld\n", nc);`**: Una vez que el bucle termina (cuando `getchar()` devuelve `EOF`), esta línea imprime el valor final del contador.
    - `%ld` es el **especificador de formato** para imprimir una variable de tipo `long int`.

## Versión más compacta con `for`

La misma lógica se puede expresar de forma más concisa utilizando un ciclo `for`.

```c
#include <stdio.h>

/* Contar los caracteres de la entrada; 2da. versión */
int main() {
    double nc; // Usar double también funciona, aunque es menos convencional

    // Toda la lógica está en la cabecera del for.
    for (nc = 0; getchar() != EOF; ++nc) {
        ; // El cuerpo del bucle es una proposición nula (vacía).
    }

    printf("Total de caracteres: %.0f\n", nc); // %.0f imprime un double sin decimales

    return 0;
}
```

### Análisis de la versión con `for`

- **`nc = 0`**: La **inicialización** del `for` establece el contador a cero.
- **`getchar() != EOF`**: La **condición** del `for` se ejecuta antes de cada "iteración".
- **`++nc`**: La parte de **incremento** del `for` se ejecuta después de que se haya leído un carácter con éxito.
- **`;`**: El punto y coma solitario es el **cuerpo** del bule. Se conoce como **proposición nula**. Significa que no hay que hacer nada dentro del bucle; toda la acción ocurre en la cabecera.

Ambas versiones son funcionalmente idénticas. La elección entre `while` y `for` es a menudo una cuestión de estilo y claridad. La primera versión con `while` suele ser más fácil de leer para los principiantes.

## ¿Cómo probar el programa?

1.  Compila el programa (ej. `gcc contador.c -o contador`).
2.  Ejecútalo: `./contador`.
3.  Escribe texto en la terminal, por ejemplo: `hola mundo`.
4.  Presiona `Enter`.
5.  Para finalizar la entrada, presiona `Ctrl+D` (en Linux/macOS) o `Ctrl+Z` y luego `Enter` (en Windows).
6.  El programa imprimirá el número de caracteres. Para "hola mundo" seguido de `Enter`, serían 11 caracteres (`h`,`o`,`l`,`a`,` `,`m`,`u`,`n`,`d`,`o` y el carácter de nueva línea `\n`).

También puedes usarlo con **redirección de entrada** para contar los caracteres de un archivo:

```bash
./contador < mi_archivo.txt
```

Esto hará que el programa lea del archivo `mi_archivo.txt` en lugar del teclado.

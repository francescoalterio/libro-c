# 1.5.3. Conteo de Líneas

De forma similar al conteo de caracteres, podemos modificar ligeramente el programa para contar el número de líneas en un texto de entrada. La clave es decidir qué define una "línea". En C, y en la mayoría de los sistemas operativos, una línea termina con el carácter de **nueva línea**, `\n`.

Por lo tanto, el programa debe leer cada carácter y, si ese carácter es un `\n`, debe incrementar un contador de líneas.

## Programa para Contar Líneas

```c
#include <stdio.h>

/* Contar las líneas de la entrada */
int main() {
    int c;     // Variable para almacenar el carácter leído (como int para EOF)
    int nl;    // Contador de líneas (number of lines)

    nl = 0;
    while ((c = getchar()) != EOF) {
        // Comprueba si el carácter es una nueva línea
        if (c == '\n') {
            ++nl; // Si lo es, incrementa el contador
        }
    }

    printf("Total de líneas: %d\n", nl); // Imprime el total

    return 0;
}
```

### Desglose del Código

1.  **`int c, nl;`**: Declaramos dos variables enteras. `c` para almacenar el carácter de entrada y `nl` para nuestro contador de líneas.
2.  **`nl = 0;`**: Inicializamos el contador de líneas a cero.
3.  **`while ((c = getchar()) != EOF)`**: Este es nuestro bucle de lectura estándar. Lee un carácter, lo asigna a `c` y continúa mientras no sea `EOF`.
4.  **`if (c == '\n')`**: Esta es la lógica principal. Dentro del bucle, después de leer un carácter, comprobamos si es igual al carácter de nueva línea `\n`.
    - `'\n'` es una **constante de tipo `char`** que representa el carácter de nueva línea.
5.  **`++nl;`**: Si la condición del `if` es verdadera, incrementamos el contador `nl`.
6.  **`printf("%d\n", nl);`**: Al final del programa, imprimimos el número total de líneas contadas.

## ¿Qué pasa con una línea final sin `\n`?

Este programa cuenta estrictamente el número de caracteres `\n`. Si un archivo de texto termina sin un carácter de nueva línea en la última línea (algo que algunos editores hacen), esa última "línea" **no será contada**.

Por ejemplo, si la entrada es:
`línea 1` (con Enter)
`línea 2` (con Enter)
El programa contará **2** líneas.

Pero si la entrada es:
`línea 1` (con Enter)
`línea 2` (sin Enter al final)
El programa solo contará **1** línea.

La definición de "línea" de la utilidad `wc` de Unix es "una secuencia de cero o más caracteres seguida de un `\n`". Según esta definición, nuestro programa es correcto.

## Comparación con el Conteo de Caracteres

El cuerpo del bucle `while` en el programa de conteo de caracteres contenía solo una expresión:
`++nc;`

En el programa de conteo de líneas, el cuerpo es una proposición `if` que controla el incremento:
`if (c == '\n') { ++nl; }`

Esto demuestra cómo se puede añadir lógica más compleja dentro del bucle de procesamiento de entrada para realizar diferentes tipos de análisis.

## Prueba del Programa

1.  Compila el código (ej. `gcc contalineas.c -o contalineas`).
2.  Ejecútalo: `./contalineas`.
3.  Escribe varias líneas de texto, presionando `Enter` después de cada una.
4.  Termina la entrada con `Ctrl+D` (en Linux/macOS) o `Ctrl+Z`.
5.  El programa mostrará el número de veces que presionaste `Enter`.

O úsalo con un archivo para contar sus líneas:

```bash
./contalineas < mi_archivo.txt
```

Esto te dirá cuántas líneas tiene `mi_archivo.txt`.

# 1.5.4. Conteo de Palabras

Contar palabras es un problema un poco más complejo que contar líneas o caracteres, porque una "palabra" no es un solo carácter. Necesitamos definir qué constituye una palabra. Una definición común es:

> Una palabra es una secuencia de caracteres que no contiene espacios en blanco (espacio, tabulador, nueva línea).

Para contar palabras, nuestro programa necesita "recordar" si el carácter anterior que vio era parte de una palabra o era un espacio en blanco. Esta idea de "recordar" estado es clave.

Usaremos una variable de estado, `state`, para saber si actualmente estamos **dentro** de una palabra (`IN`) o **fuera** de una palabra (`OUT`).

## Lógica del Programa

1.  Inicializar el contador de palabras `nw` a 0.
2.  Inicializar el estado `state` a `OUT` (porque al principio no estamos dentro de una palabra).
3.  Leer cada carácter uno por uno hasta `EOF`.
4.  Para cada carácter:
    - Si el carácter es un espacio, un tabulador o una nueva línea, estamos "fuera" de una palabra. Cambiamos el estado a `OUT`.
    - Si el carácter NO es un espacio en blanco:
      - Y si nuestro estado anterior era `OUT`, significa que acabamos de encontrar el _comienzo_ de una nueva palabra. Por lo tanto, incrementamos el contador de palabras `nw` y cambiamos el estado a `IN`.
      - Si nuestro estado anterior ya era `IN`, simplemente continuamos, ya que seguimos dentro de la misma palabra.

## Programa para Contar Palabras

```c
#include <stdio.h>

#define IN  1   // Estamos dentro de una palabra
#define OUT 0   // Estamos fuera de una palabra

/* Contar líneas, palabras y caracteres de la entrada */
int main() {
    int c, nl, nw, nc, state;

    state = OUT;
    nl = nw = nc = 0; // Inicializa todos los contadores a 0

    while ((c = getchar()) != EOF) {
        ++nc; // Siempre cuenta el carácter

        if (c == '\n') {
            ++nl; // Cuenta la línea
        }

        if (c == ' ' || c == '\n' || c == '\t') {
            state = OUT; // Si es un espacio en blanco, estamos fuera
        } else if (state == OUT) {
            // Si no es un espacio en blanco y estábamos fuera...
            state = IN;  // ...hemos entrado en una palabra...
            ++nw;        // ...así que la contamos.
        }
    }

    printf("Líneas: %d\nPalabras: %d\nCaracteres: %d\n", nl, nw, nc);

    return 0;
}
```

### Desglose del Código

1.  **`#define IN 1` y `#define OUT 0`**: Usamos constantes simbólicas para que el código sea más legible. `state = IN;` es más claro que `state = 1;`.
2.  **`int c, nl, nw, nc, state;`**: Declaramos variables para el carácter (`c`), contadores de líneas (`nl`), palabras (`nw`), caracteres (`nc`), y nuestra variable de estado (`state`).
3.  **`state = OUT;`**: Empezamos "fuera" de una palabra.
4.  **`nl = nw = nc = 0;`**: C permite asignaciones múltiples. Esta línea es equivalente a `nc = 0; nw = 0; nl = 0;`.
5.  **`if (c == ' ' || c == '\n' || c == '\t')`**: Comprueba si el carácter actual es un espacio, una nueva línea o un tabulador. El operador `||` significa "O".
6.  **`else if (state == OUT)`**: Esta es la parte crucial. Este bloque solo se ejecuta si el carácter **no** es un espacio en blanco. Dentro de él, comprobamos si veníamos de estar "fuera" de una palabra.
    - Si ambas condiciones son ciertas (el carácter no es un espacio Y estábamos fuera), significa que hemos encontrado el primer carácter de una nueva palabra.
    - Cambiamos `state` a `IN` y, lo más importante, incrementamos `nw`.

Este programa es una versión simplificada de la utilidad `wc` de Unix, que cuenta líneas, palabras y caracteres.

## Ejemplo de Ejecución

Imagina que la entrada es: `hola mundo`

1.  `h`: No es espacio, `state` era `OUT`. `nw` se convierte en 1. `state` se convierte en `IN`.
2.  `o`: No es espacio, `state` es `IN`. No pasa nada.
3.  `l`: No es espacio, `state` es `IN`. No pasa nada.
4.  `a`: No es espacio, `state` es `IN`. No pasa nada.
5.  ` `: Es un espacio. `state` se convierte en `OUT`.
6.  `m`: No es espacio, `state` era `OUT`. `nw` se convierte en 2. `state` se convierte en `IN`.
7.  `u`: No es espacio, `state` es `IN`. No pasa nada.
8.  ... y así sucesivamente.

El resultado final será `Palabras: 2`.

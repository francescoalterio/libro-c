# 1.7. Funciones

Las **funciones** son los bloques de construcción fundamentales de un programa en C. Permiten encapsular una tarea en una unidad de código autónoma, que puede ser llamada y reutilizada desde diferentes partes del programa. Esta modularización es clave para escribir código organizado, legible y mantenible.

## Anatomía de una Función en C

Una función en C consta de dos partes principales: la declaración (prototipo) y la definición (implementación).

### 1. Declaración (Prototipo)

La declaración, o prototipo, informa al compilador sobre la existencia de una función: su nombre, el tipo de dato que devuelve y los tipos de sus parámetros. Es como un "aviso" para que el compilador sepa cómo verificar las llamadas a esa función, incluso si la implementación está más adelante en el código o en otro archivo.

**Sintaxis del Prototipo:**

```c
tipo_retorno nombre_funcion(tipo_param1, tipo_param2, ...);
```

**Ejemplo:**

```c
// Prototipo de una función que calcula la potencia de un número.
int power(int base, int n);
```

Colocar los prototipos al inicio del archivo o en archivos de cabecera (`.h`) es una práctica estándar.

### 2. Definición (Implementación)

La definición es donde se escribe el código real de la función, es decir, las instrucciones que ejecutará.

**Sintaxis de la Definición:**

```c
tipo_retorno nombre_funcion(tipo_param1 nombre_param1, tipo_param2 nombre_param2, ...) {
    // Cuerpo de la función: declaraciones y sentencias
    // ...
    return valor_de_retorno; // Si el tipo de retorno no es void
}
```

## Ejemplo Completo: Función `power`

Este programa define y utiliza una función `power` para calcular `base^n`.

```c
#include <stdio.h>

// 1. Declaración (prototipo) de la función power
int power(int base, int n);

// La función main es el punto de entrada del programa
int main() {
    int i;

    printf("n\t2^n\t-3^n\n");
    printf("--------------------\n");
    for (i = 0; i < 10; ++i) {
        // 3. Llamada a la función power
        printf("%d\t%d\t%d\n", i, power(2, i), power(-3, i));
    }

    return 0; // Indica que el programa terminó correctamente
}

// 2. Definición (implementación) de la función power
int power(int base, int n) {
    int i, p;

    p = 1;
    for (i = 1; i <= n; ++i) {
        p = p * base;
    }
    return p; // Devuelve el resultado calculado
}
```

## Paso de Argumentos: Por Valor

En C, los argumentos de una función se pasan **por valor**. Esto significa que la función recibe una **copia** del valor de la variable original, no la variable misma. Cualquier modificación que la función haga a sus parámetros solo afecta a esas copias locales y **no altera las variables originales** en la función que la llamó.

**Ejemplo:**

```c
#include <stdio.h>

void intentar_modificar(int x) {
    printf("Dentro de la función (antes): x = %d\n", x);
    x = 99; // Modificamos la copia local
    printf("Dentro de la función (después): x = %d\n", x);
}

int main() {
    int numero = 10;
    printf("Antes de llamar a la función: numero = %d\n", numero);

    intentar_modificar(numero);

    printf("Después de llamar a la función: numero = %d\n", numero); // Sigue siendo 10
    return 0;
}
```

**Salida:**

```
Antes de llamar a la función: numero = 10
Dentro de la función (antes): x = 10
Dentro de la función (después): x = 99
Después de llamar a la función: numero = 10
```

Para modificar una variable original, es necesario pasar un **puntero** a ella, un concepto que se verá más adelante.

## Comparación Detallada: C vs. JavaScript

| Característica         | Funciones en C                                                                 | Funciones en JavaScript                                                                      |
| :--------------------- | :----------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------- |
| **Tipado**             | Estricto. Se debe declarar el tipo de retorno y de cada parámetro.             | Dinámico. No se especifican tipos.                                                           |
| **Declaración**        | Requiere prototipo si se usa antes de la definición.                           | No requiere prototipo. Las funciones se "elevan" (hoisting).                                 |
| **Paso de Argumentos** | Siempre por valor. Para modificar, se usan punteros.                           | Primitivos por valor. Objetos y arreglos por "referencia" (la referencia se pasa por valor). |
| **Sobrecarga**         | No soportada. No puede haber dos funciones con el mismo nombre.                | Soportada. Una función puede manejar diferentes números de argumentos.                       |
| **Función Principal**  | La ejecución siempre comienza en `main()`.                                     | La ejecución comienza en la primera línea del script global.                                 |
| **Retorno**            | Debe coincidir con el tipo de retorno declarado. `void` para no retornar nada. | Puede retornar cualquier cosa. Si no hay `return`, devuelve `undefined`.                     |

## Resumen

Las funciones son la columna vertebral de la programación estructurada en C. Permiten crear código modular, reutilizable y fácil de depurar. Comprender la distinción entre declaración y definición, y el mecanismo de paso por valor, es esencial para escribir programas robustos y correctos en C.

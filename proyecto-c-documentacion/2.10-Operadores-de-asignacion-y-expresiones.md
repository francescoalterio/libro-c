# 2.10. Operadores de Asignación y Expresiones

En C, una **expresión** es una combinación de variables, constantes, operadores y llamadas a funciones que, al ser evaluada, produce un valor. Las expresiones son los bloques de construcción fundamentales de la lógica de un programa. La **asignación** es una de las expresiones más comunes.

## El Operador de Asignación Simple (`=`)

El operador `=` asigna el valor de la expresión de la derecha a la variable (l-value) de la izquierda.

```c
int x;
x = 10; // La expresión es "10", se asigna a x.

int y = 20;
x = y + 5; // La expresión es "y + 5", su resultado (25) se asigna a x.
```

### La Asignación es una Expresión en Sí Misma

Una característica clave en C es que una asignación no es solo una sentencia, sino una expresión que **tiene un valor**. El valor de una expresión de asignación es el valor que se asigna, y su tipo es el tipo de la variable de la izquierda.

Esto permite encadenar asignaciones:

```c
int a, b, c;
a = b = c = 5;
```

Debido a que los operadores de asignación se asocian de **derecha a izquierda**, esta línea se evalúa así:

1.  `c = 5`: `c` recibe el valor 5. La expresión `c = 5` tiene el valor 5.
2.  `b = (c = 5)`: `b` recibe el valor de la expresión de la derecha, que es 5. La expresión `b = 5` tiene el valor 5.
3.  `a = (b = 5)`: `a` recibe el valor 5.

También permite construcciones compactas, aunque a veces menos legibles:

```c
// Copia un carácter de s a t y comprueba si no es el nulo '\0'
while ((t[i] = s[i]) != '\0') {
    i++;
}
```

Aquí, el valor de la asignación `t[i] = s[i]` (que es el carácter copiado) se usa directamente en la comparación del `while`.

## Operadores de Asignación Compuesta

Para muchas operaciones comunes como `variable = variable op expresion`, C ofrece operadores de asignación compuesta que son más concisos y, a menudo, más eficientes. La forma general es `op=`.

| Operador | Ejemplo   | Equivalente a |
| :------- | :-------- | :------------ | ---- | ------ | --- |
| `+=`     | `x += y`  | `x = x + y`   |
| `-=`     | `x -= y`  | `x = x - y`   |
| `*=`     | `x *= y`  | `x = x * y`   |
| `/=`     | `x /= y`  | `x = x / y`   |
| `%=`     | `x %= y`  | `x = x % y`   |
| `<<=`    | `x <<= y` | `x = x << y`  |
| `>>=`    | `x >>= y` | `x = x >> y`  |
| `&=`     | `x &= y`  | `x = x & y`   |
| `        | =`        | `x            | = y` | `x = x | y`  |
| `^=`     | `x ^= y`  | `x = x ^ y`   |

**Ventajas:**

1.  **Concisión:** `contador_palabras += 1;` es más corto que `contador_palabras = contador_palabras + 1;`.
2.  **Claridad:** Expresan la intención de "modificar esta variable" de forma más directa.
3.  **Eficiencia (potencial):** En expresiones complejas, el operando de la izquierda solo se evalúa una vez.

    ```c
    // Con asignación compuesta, arr[i * j + k] se calcula una sola vez.
    arr[i * j + k] += 1;

    // Con asignación simple, se calcularía dos veces, lo cual es ineficiente y podría ser erróneo si 'i', 'j' o 'k' cambian.
    arr[i * j + k] = arr[i * j + k] + 1;
    ```

## Comparación con JavaScript

El comportamiento de los operadores de asignación, tanto el simple (`=`) como los compuestos (`+=`, `-=`, etc.), es **prácticamente idéntico en JavaScript**. La idea de que una asignación es una expresión que produce un valor y la asociatividad de derecha a izquierda también se aplican en JavaScript, permitiendo construcciones como `a = b = 5;`.

## Resumen

- Una **expresión** produce un valor. La **asignación** es un tipo de expresión.
- El valor de una asignación es el valor asignado, lo que permite encadenarlas.
- Los **operadores de asignación compuesta** (`op=`) ofrecen una forma más concisa y eficiente de modificar una variable basándose en su propio valor.
- Estos operadores son una herramienta fundamental para escribir código C idiomático y eficiente.

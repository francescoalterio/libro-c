# 2.3. Constantes

Una **constante** es un valor que no puede ser alterado durante la ejecución del programa. El uso de constantes en lugar de "números mágicos" (valores literales codificados directamente) es una práctica de programación fundamental que mejora drásticamente la legibilidad, el mantenimiento y la robustez del código.

## ¿Por qué evitar "Números Mágicos"?

Considera este código:

```c
// Mal: ¿Qué significan 100 y 0.16?
if (lineas > 100) {
    total = subtotal * (1 + 0.16);
}
```

Ahora, con constantes:

```c
#define MAX_LINEAS 100
const float TASA_IVA = 0.16;

// Bien: El código se auto-documenta
if (lineas > MAX_LINEAS) {
    total = subtotal * (1 + TASA_IVA);
}
```

Si `MAX_LINEAS` necesita cambiar, solo lo modificas en un lugar.

En C, hay tres formas principales de definir constantes:

## 1. Calificador `const`

Este es el método moderno y preferido para crear constantes con tipo. El calificador `const` se aplica a una declaración de variable, especificando que su valor no puede ser modificado después de la inicialización.

```c
const int DIAS_SEMANA = 7;
const float PI = 3.14159f; // 'f' para indicar que es un float
const char MENSAJE_BIENVENIDA[] = "Hola, mundo!";
```

### Propiedades de `const`:

- **Con Tipo:** `const` tiene un tipo de dato específico (`int`, `float`, etc.), lo que permite al compilador realizar comprobaciones de tipo.
- **Con Alcance (Scope):** Respeta las reglas de alcance de C. Una constante `const` definida dentro de una función solo es visible allí.
- **Depurable:** Al ser una variable real, es visible en el depurador.

## 2. Directiva de Preprocesador `#define`

Este es el método tradicional. `#define` crea una **macro**, instruyendo al preprocesador para que realice una sustitución de texto literal en el código antes de la compilación.

```c
#define PI 3.14159
#define MAX_USUARIOS 50
```

Dondequiera que el preprocesador encuentre `PI`, lo reemplazará textualmente con `3.14159`.

### Propiedades de `#define`:

- **Sin Tipo:** Es solo texto. No hay información de tipo, lo que puede impedir ciertas comprobaciones del compilador.
- **Alcance Global (de archivo):** Una vez definida, la macro existe desde ese punto hasta el final del archivo (o hasta un `#undef`).
- **No Depurable:** El compilador nunca ve el nombre `PI`, solo el número, por lo que no aparece en el depurador.

## 3. Enumeraciones (`enum`)

Las enumeraciones son una forma limpia y eficiente de crear un conjunto de constantes de tipo entero con nombre.

```c
// Por defecto, LUNES=0, MARTES=1, etc.
enum DiasSemana { LUNES, MARTES, MIERCOLES, JUEVES, VIERNES, SABADO, DOMINGO };

// Se pueden asignar valores explícitos
enum Estado { APAGADO = 0, ENCENDIDO = 1, SUSPENDIDO = 5 };
```

`enum` es el método preferido para representar un conjunto de estados o opciones relacionadas.

## Tabla Comparativa: `const` vs. `#define` vs. `enum`

| Característica     | `const`                                                   | `#define`                                      | `enum`                                      |
| :----------------- | :-------------------------------------------------------- | :--------------------------------------------- | :------------------------------------------ |
| **Tipo de Dato**   | Sí, fuertemente tipado.                                   | No, sustitución de texto.                      | Sí, son de tipo `int`.                      |
| **Alcance**        | Respeta el alcance del bloque.                            | Global al archivo desde su definición.         | Respeta el alcance del bloque.              |
| **Uso de Memoria** | Almacenado en memoria como una variable.                  | No usa memoria, se inserta en el código.       | Almacenado como un `int`.                   |
| **Depuración**     | Visible en el depurador.                                  | No visible (el depurador ve el valor literal). | Visible en el depurador.                    |
| **Uso Principal**  | Constantes de cualquier tipo (flotantes, arreglos, etc.). | Macros simples, guardas de inclusión.          | Conjuntos de constantes enteras con nombre. |

## Constantes de Cadena (String Literals)

Un valor como `"Hola, mundo"` es una constante de tipo arreglo de caracteres. Se almacena en una sección de memoria de solo lectura del programa.

```c
char* mensaje = "Este es un mensaje constante";
// mensaje[0] = 'e'; // ¡ERROR! Comportamiento indefinido, puede causar un crash.
```

## Resumen

- **Usa `const`** como tu opción predeterminada para definir constantes con tipo. Es más seguro y flexible.
- **Usa `enum`** cuando necesites definir un conjunto de constantes enteras relacionadas (estados, códigos de error, etc.).
- **Usa `#define`** con moderación, principalmente para guardas de inclusión en archivos de cabecera o para macros muy simples donde la sustitución de texto es intencionada.

# 2.4. Declaraciones

En C, una **declaración** es una construcción que introduce uno o más identificadores (nombres) en el programa y especifica sus propiedades, como su tipo. Todas las variables deben ser declaradas antes de poder ser utilizadas. Esta es una regla fundamental del tipado estático de C, que permite al compilador verificar que las variables se usen correctamente.

## Componentes de una Declaración

Una declaración simple consta de dos partes principales:

1.  **Un especificador de tipo:** Indica el tipo de dato de la variable (p. ej., `int`, `float`, `char`).
2.  **Una lista de declaradores:** Nombres de las variables, que pueden ir acompañados de una inicialización.

```c
// Declaración de tres variables enteras
int contador, suma, resultado;

// Declaración e inicialización
char caracter = 'A';
float interes = 0.05f;
const int MAX_VALOR = 100;
```

## Declaración vs. Definición

Este es uno de los conceptos más importantes y a menudo confusos de C.

- **Declaración:** Anuncia la existencia y las propiedades de una variable o función. Le dice al compilador "este nombre existe y este es su tipo". No necesariamente reserva memoria.
- **Definición:** Es una declaración que, además, causa que se reserve almacenamiento (memoria) para la variable. Para una función, una definición proporciona el cuerpo de la misma.

**Toda definición es una declaración, pero no toda declaración es una definición.**

### Ejemplos para Clarificar

```c
// 1. Variables
int i; // Esto es una DEFINICIÓN. Reserva memoria para un entero 'i'.

extern int j; // Esto es una DECLARACIÓN. Anuncia que 'j' es un entero
              // definido en otro lugar. No reserva memoria aquí.

// 2. Funciones
int mi_funcion(int arg); // DECLARACIÓN (prototipo). Anuncia la firma de la función.

int mi_funcion(int arg) { // DEFINICIÓN. Proporciona el cuerpo de la función.
    return arg * 2;
}
```

La palabra clave `extern` es la que explícitamente convierte una declaración de variable en una que no es una definición.

## ¿Dónde se pueden hacer las declaraciones?

El estándar C ha evolucionado en este aspecto:

- **ANSI C (C89/C90):** Las declaraciones de variables solo podían hacerse al **principio de un bloque** (`{...}`), antes de cualquier sentencia ejecutable.
- **C99 y posteriores (C11, C18):** Se eliminó esta restricción. Ahora puedes declarar variables en cualquier punto dentro de un bloque, siempre que sea antes de su primer uso. Esto permite declarar variables más cerca de donde se utilizan, mejorando la legibilidad.

```c
// Válido en C99 y posteriores
void funcion_moderna() {
    printf("Primer paso...\n");

    // Declaración a mitad del bloque
    int resultado = 10;

    printf("El resultado es %d\n", resultado);

    for (int i = 0; i < 5; i++) { // 'i' declarada en el bucle
        // ...
    }
}
```

## Inicialización

Una variable puede ser inicializada en el momento de su declaración.

```c
int x = 1;
char comilla = '\'';
long dia = 1000L * 60L * 60L * 24L; // 1000 * 60 * 60 * 24
```

Si una variable no se inicializa explícitamente, su valor inicial depende de su clase de almacenamiento:

- **Variables automáticas (locales a una función):** Contienen "basura", es decir, un valor indeterminado. **Es un error grave usarlas sin antes asignarles un valor.**
- **Variables estáticas y externas:** Se inicializan a **cero** por defecto.

## Resumen

- **Declarar antes de usar:** Es una regla inquebrantable en C.
- **Declaración vs. Definición:** Entender esta diferencia es clave para trabajar con múltiples archivos y la palabra clave `extern`.
- **Inicialización:** Es una buena práctica inicializar siempre las variables en su declaración para evitar el uso de valores "basura".
- **Estándar C99:** Permite una mayor flexibilidad en la ubicación de las declaraciones, lo que puede hacer el código más limpio y legible.

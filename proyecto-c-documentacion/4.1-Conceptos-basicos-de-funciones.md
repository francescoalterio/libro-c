# 4.1. Conceptos Básicos de Funciones

Las funciones son los bloques de construcción fundamentales de cualquier programa en C. Permiten encapsular una tarea específica en una unidad de código autónoma y reutilizable. Un programa bien estructurado se compone de muchas funciones pequeñas, cada una de las cuales realiza una parte bien definida del trabajo total.

## ¿Por qué usar Funciones?

- **Modularidad y Organización:** Dividen un problema grande y complejo en subproblemas más pequeños y manejables. Es más fácil escribir, depurar y entender una función que calcula una raíz cuadrada que un programa monolítico que hace todo a la vez.
- **Reutilización de Código:** Una vez que escribes una función, puedes "llamarla" (invocarla) desde diferentes partes de tu programa tantas veces como necesites, sin tener que reescribir el mismo código.
- **Abstracción:** Ocultan los detalles de implementación. Cuando usas la función `printf`, no necesitas saber _cómo_ exactamente convierte tus datos en una cadena de caracteres y los envía a la pantalla; solo necesitas saber _qué_ hace y qué argumentos espera.
- **Mantenimiento:** Si necesitas corregir un error o mejorar una tarea específica, solo tienes que modificar la función correspondiente, en lugar de buscar el código relevante esparcido por todo el programa.

## Anatomía de una Función

Una definición de función en C tiene la siguiente estructura:

```c
tipo_de_retorno nombre_de_la_funcion(lista_de_parametros) {
    // Cuerpo de la función: declaraciones y proposiciones
    // ...
    return valor_de_retorno;
}
```

**Componentes:**

1.  **`tipo_de_retorno`**: El tipo de dato del valor que la función devuelve a quien la llamó. Si la función no devuelve ningún valor, se usa la palabra clave `void`.
2.  **`nombre_de_la_funcion`**: Un nombre único que identifica a la función. Sigue las mismas reglas que los nombres de variables.
3.  **`lista_de_parametros`**: Una lista separada por comas de las declaraciones de las variables que la función recibe como entrada. Cada parámetro debe tener su tipo especificado. Si la función no recibe ningún parámetro, se usa `(void)`.
4.  **Cuerpo de la Función**: Un bloque de código `{ ... }` que contiene las instrucciones que realizan la tarea de la función.
5.  **`return valor_de_retorno;`**: La proposición `return` termina la ejecución de la función y, opcionalmente, devuelve un valor a quien la llamó. El tipo de `valor_de_retorno` debe ser compatible con el `tipo_de_retorno` declarado.

**Ejemplo: Una función simple para sumar dos enteros**

```c
// Definición de la función 'sumar'
int sumar(int a, int b) {
    int resultado;       // Variable local a la función
    resultado = a + b;
    return resultado;    // Devuelve el resultado de la suma
}
```

## Declaración y Definición de Funciones

En C, el compilador procesa el código de arriba hacia abajo. Para poder llamar a una función, el compilador debe conocer su "firma" (tipo de retorno, nombre y tipos de parámetros) antes de la llamada. Esto se puede lograr de dos maneras:

1.  **Definir la función antes de usarla:**

    ```c
    #include <stdio.h>

    // Definición completa antes de main
    int sumar(int a, int b) {
        return a + b;
    }

    int main() {
        int total = sumar(5, 3); // El compilador ya conoce 'sumar'
        printf("Total: %d\n", total);
        return 0;
    }
    ```

2.  **Declarar un prototipo de la función:** Un prototipo es una declaración que le dice al compilador la firma de la función sin proporcionar su cuerpo. Esto permite definir la función en cualquier otro lugar (incluso en otro archivo).

    ```c
    #include <stdio.h>

    // Prototipo de la función (declaración)
    int sumar(int a, int b);

    int main() {
        int total = sumar(5, 3); // El compilador conoce 'sumar' gracias al prototipo
        printf("Total: %d\n", total);
        return 0;
    }

    // Definición de la función (implementación)
    int sumar(int a, int b) {
        return a + b;
    }
    ```

    El uso de prototipos, a menudo agrupados en archivos de cabecera (`.h`), es la práctica estándar en programas de C de cualquier tamaño.

## Comparación con JavaScript

- **Estructura:** El concepto de función como bloque de código reutilizable es el mismo.
- **Tipado:** La gran diferencia es el sistema de tipos. En C, debes declarar explícitamente el tipo de retorno y el tipo de cada parámetro. JavaScript es un lenguaje de tipado dinámico, por lo que no requiere estas declaraciones.
- **Declaración vs. Expresión:** En JavaScript, las funciones pueden ser declaradas (`function miFunc() {}`) o ser parte de una expresión (`const miFunc = function() {}`). En C, la distinción es entre la declaración (prototipo) y la definición (cuerpo).

```javascript
// JS es de tipado dinámico
function sumar(a, b) {
  return a + b;
}
```

## Resumen

- Las funciones son la clave para la modularidad, reutilización y organización del código en C.
- Toda función tiene un tipo de retorno, un nombre, una lista de parámetros y un cuerpo.
- Para llamar a una función, el compilador debe haber visto previamente su definición o, más comúnmente, su **prototipo**.
- El uso de prototipos permite separar la declaración de la interfaz de una función de su implementación.

# 4.9. Inicialización

La **inicialización** es el proceso de asignar un valor inicial a una variable en el momento de su declaración. Es una práctica de programación fundamental para asegurar que las variables comiencen con un estado conocido y predecible, evitando así comportamientos indefinidos.

## Reglas de Inicialización por Tipo de Almacenamiento

El comportamiento de la inicialización en C depende del **tiempo de vida** o **clase de almacenamiento** de la variable.

### 1. Variables Automáticas (Locales)

- **Contexto:** Variables declaradas dentro de una función o bloque sin el especificador `static`.
- **Regla:** Si no se inicializan explícitamente, su valor inicial es **indefinido** o **basura** (lo que sea que estuviera en esa posición de memoria).
- **Inicializador:** Puede ser cualquier expresión, incluso una llamada a una función. La inicialización se realiza cada vez que el flujo de control entra en el bloque.

```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int obtener_aleatorio() {
    return rand() % 100;
}

void funcion_local() {
    int x; // Valor inicial: basura. Usarla es un error.
    int y = 10; // Inicializada explícitamente a 10.
    int z = y + 5; // Inicializada con el resultado de una expresión.
    int r = obtener_aleatorio(); // Inicializada con el valor de retorno de una función.

    printf("x (basura): %d, y: %d, z: %d, r: %d\n", x, y, z, r);
}

int main() {
    srand(time(NULL));
    funcion_local();
    return 0;
}
```

**Práctica recomendada:** Inicializa siempre las variables locales en el momento de su declaración.

### 2. Variables Estáticas y Externas (Globales)

- **Contexto:** Variables declaradas fuera de cualquier función, o dentro de una función con el especificador `static`.
- **Regla:** Si no se inicializan explícitamente, el sistema las inicializa **automáticamente a cero** (o su equivalente nulo para otros tipos: `0.0` para floats, `NULL` para punteros, etc.).
- **Inicializador:** Debe ser una **expresión constante**. No puede ser una llamada a una función o una expresión que dependa de otra variable. La inicialización ocurre una sola vez, antes de que el programa comience a ejecutarse.

```c
#include <stdio.h>

#define MAX_SIZE 100

int global_sin_inicializar; // Se inicializa a 0 automáticamente.
int global_inicializada = 10; // Inicializador constante.
// int global_error = global_inicializada + 5; // ¡ERROR! El inicializador no es constante.
int tamano_arreglo = MAX_SIZE; // Correcto, MAX_SIZE es una constante del preprocesador.

void funcion_estatica() {
    static int contador_estatico; // Se inicializa a 0 automáticamente, solo una vez.
    printf("Contador estático: %d\n", contador_estatico);
    contador_estatico++;
}

int main() {
    printf("Global sin inicializar: %d\n", global_sin_inicializar);
    funcion_estatica();
    funcion_estatica();
    return 0;
}
```

## Inicialización de Agregados (Arreglos y Estructuras)

Se pueden inicializar tipos de datos agregados usando una lista de inicializadores entre llaves `{...}`.

**Arreglos:**

```c
// El tamaño se deduce de la lista de inicializadores
int arr[] = {10, 20, 30, 40};

// Especificar el tamaño. Los elementos no inicializados se ponen a 0.
int arr_grande[10] = {1, 2, 3}; // arr_grande[3] hasta arr_grande[9] son 0.

// Inicialización de cadena de caracteres (dos formas equivalentes)
char str1[] = "hola";
char str2[] = {'h', 'o', 'l', 'a', '\0'};
```

**Estructuras (se verán más adelante):**

```c
struct punto { int x; int y; };
struct punto p1 = {100, 200};
```

## Comparación con JavaScript

- **Variables no inicializadas:** En JavaScript, si declaras una variable con `let` o `var` sin inicializarla, su valor es `undefined`. En C, para variables locales, es basura. Esta diferencia es crucial: `undefined` es un estado conocido, mientras que la basura es impredecible.
  ```javascript
  let x; // x es undefined
  console.log(x); // Imprime "undefined"
  ```
- **Inicialización a cero:** No existe una inicialización automática a cero para variables globales en JavaScript como en C.

## Resumen

| Tipo de Variable       | Inicialización por Defecto | Tipo de Inicializador Permitido |
| :--------------------- | :------------------------- | :------------------------------ |
| **Automática (local)** | **Basura (indefinido)**    | Cualquier expresión             |
| **Estática / Externa** | **Cero**                   | Solo expresiones constantes     |

- **La regla más importante:** Siempre inicializa tus variables locales para evitar usar valores "basura", que es una fuente común de errores.
- Aprovecha la inicialización a cero garantizada para variables estáticas y globales.

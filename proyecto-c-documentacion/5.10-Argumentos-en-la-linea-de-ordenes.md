# 5.10. Argumentos en la Línea de Órdenes

Muchos programas, especialmente las herramientas de línea de comandos, necesitan recibir información del usuario cuando se ejecutan. En C, esto se logra a través de los **argumentos de la línea de órdenes** (o línea de comandos), que se pasan a la función `main`.

Para acceder a estos argumentos, se utiliza una firma específica para la función `main`:

`int main(int argc, char *argv[])`

## Desglose de los Parámetros

### 1. `int argc` (Argument Count)

- **`argc`** es un entero que contiene el **número de argumentos** pasados al programa, incluyendo el nombre del propio programa.
- Su valor siempre será al menos `1`, porque el primer argumento (`argv[0]`) es siempre el nombre con el que se invocó el programa.

### 2. `char *argv[]` (Argument Vector)

- **`argv`** es el "vector de argumentos" (del inglés _argument vector_). Es un **arreglo de apuntadores a `char`**.
- Cada elemento de este arreglo, desde `argv[0]` hasta `argv[argc-1]`, es un apuntador a una cadena (terminada en `\0`) que representa un argumento.
- `argv[0]`: Apunta al nombre del programa.
- `argv[1]`: Apunta al primer argumento real.
- `argv[2]`: Apunta al segundo argumento real.
- ...
- `argv[argc-1]`: Apunta al último argumento.
- Por convención, `argv[argc]` es un apuntador nulo (`NULL`).

La declaración `char *argv[]` es equivalente a `char **argv` (un apuntador a un apuntador a `char`), lo que refuerza la idea de que es una estructura de datos de "arreglo de cadenas".

## Ejemplo: Imprimir los Argumentos

Este programa simple imprime todos los argumentos que recibe.

```c
#include <stdio.h>

// Compilar como: gcc mi_programa.c -o mi_programa
// Ejecutar como: ./mi_programa hola mundo 123

int main(int argc, char *argv[]) {
    printf("Programa ejecutado: %s\n", argv[0]);
    printf("Número total de argumentos (incluyendo el nombre): %d\n", argc);

    if (argc > 1) {
        printf("\nArgumentos recibidos:\n");
        // Empezamos en 1 para ignorar el nombre del programa.
        for (int i = 1; i < argc; i++) {
            printf("  Argumento %d: %s\n", i, argv[i]);
        }
    } else {
        printf("\nNo se proporcionaron argumentos adicionales.\n");
    }

    return 0;
}
```

**Salida de la ejecución `./mi_programa hola mundo 123`:**

```
Programa ejecutado: ./mi_programa
Número total de argumentos (incluyendo el nombre): 4

Argumentos recibidos:
  Argumento 1: hola
  Argumento 2: mundo
  Argumento 3: 123
```

**Nota importante:** Todos los argumentos, incluso los que parecen números como `123`, se reciben como **cadenas de caracteres**. Si necesitas usarlos como números, debes convertirlos explícitamente usando funciones como `atoi()` (para enteros) o `atof()` (para flotantes) de la biblioteca `<stdlib.h>`.

## Ejemplo: Un Eco Simple

Este programa "hace eco" de los argumentos que se le pasan, imprimiéndolos en la misma línea.

```c
#include <stdio.h>

int main(int argc, char *argv[]) {
    // Bucle que empieza en 1 para saltarse el nombre del programa
    for (int i = 1; i < argc; i++) {
        printf("%s%s", argv[i], (i < argc - 1) ? " " : "");
    }
    printf("\n");
    return 0;
}
```

**Ejecución:** `./echo Hola a todos`
**Salida:** `Hola a todos`

## Comparación con JavaScript (Node.js)

En el entorno de servidor de JavaScript, **Node.js**, el acceso a los argumentos de la línea de comandos es muy similar conceptualmente, pero se realiza a través del objeto global `process`.

- **`process.argv`**: Es un arreglo que contiene los argumentos de la línea de comandos.

```javascript
// archivo: app.js
// Ejecutar como: node app.js hola mundo 123

console.log(process.argv);
```

**Salida:**

```
[
  '/usr/bin/node',                      // process.argv[0]: Ruta al ejecutable de Node.js
  '/ruta/a/app.js',                     // process.argv[1]: Ruta al script que se está ejecutando
  'hola',                               // process.argv[2]: Primer argumento real
  'mundo',                              // process.argv[3]: Segundo argumento real
  '123'                                 // process.argv[4]: Tercer argumento real
]
```

**Diferencias clave:**

- En C, `argv[0]` es el nombre del programa. En Node.js, `process.argv[0]` es el ejecutable de Node y `process.argv[1]` es el script, por lo que los argumentos reales comienzan en el índice `2`.
- Al igual que en C, todos los argumentos en `process.argv` son cadenas.

## Resumen

- La función `main` puede recibir argumentos de la línea de comandos a través de `int argc` y `char *argv[]`.
- `argc` es el contador de argumentos (siempre >= 1).
- `argv` es un arreglo de apuntadores a cadenas, donde `argv[0]` es el nombre del programa.
- Esta es la forma estándar de crear herramientas de línea de comandos interactivas y configurables en C.
- El mecanismo es conceptualmente similar a `process.argv` en Node.js, aunque los índices de inicio para los argumentos reales difieren.

# 5.7. Arreglos Multidimensionales

Un **arreglo multidimensional** es, en esencia, un "arreglo de arreglos". El tipo más común es el arreglo bidimensional (2D), que se puede visualizar como una tabla o matriz con filas y columnas.

En C, estos arreglos se almacenan en memoria de forma **contigua, fila por fila**. Esta organización es importante para entender cómo acceder a sus elementos usando tanto la notación de corchetes como la aritmética de apuntadores.

## Declaración e Inicialización

Para declarar un arreglo 2D, se especifican dos tamaños: el número de filas y el número de columnas.

`tipo nombre_arreglo[NUM_FILAS][NUM_COLUMNAS];`

**Ejemplo de inicialización:**

```c
// Una matriz de 2 filas y 3 columnas.
int matriz[2][3] = {
    {1, 2, 3},  // Fila 0
    {4, 5, 6}   // Fila 1
};

// La inicialización anidada es opcional, pero muy recomendable por claridad.
// Esto también es válido, pero menos legible:
int matriz_lineal[2][3] = {1, 2, 3, 4, 5, 6};
```

## Acceso a Elementos

Se puede acceder a los elementos utilizando dos índices: `matriz[fila][columna]`.

```c
#include <stdio.h>

int main() {
    int matriz[2][3] = {{1, 2, 3}, {4, 5, 6}};

    // Acceder al elemento en la fila 1, columna 2 (el valor 6)
    int elemento = matriz[1][2];
    printf("El elemento en [1][2] es: %d\n", elemento);

    // Recorrer la matriz para imprimir todos sus elementos
    printf("\nContenido de la matriz:\n");
    for (int i = 0; i < 2; i++) { // Recorre las filas
        for (int j = 0; j < 3; j++) { // Recorre las columnas
            printf("%d ", matriz[i][j]);
        }
        printf("\n"); // Nueva línea al final de cada fila
    }
    return 0;
}
```

## Arreglos Multidimensionales y Apuntadores

La relación con los apuntadores es más sutil que con los arreglos 1D.

- `matriz`: Es un apuntador al **primer arreglo (la primera fila)**. Su tipo no es `int *`, sino `int (*)[3]` (un apuntador a un arreglo de 3 enteros).
- `matriz[0]`: Es un apuntador al **primer elemento de la primera fila**. Su tipo es `int *`. Es equivalente a `&matriz[0][0]`.
- `matriz[1]`: Es un apuntador al **primer elemento de la segunda fila**. Su tipo es `int *`. Es equivalente a `&matriz[1][0]`.

Debido a que la memoria es contigua, también se puede usar un solo apuntador `int *` para recorrer toda la matriz, pero se debe tener cuidado con el cálculo de los índices.

```c
int matriz[2][3] = {{1, 2, 3}, {4, 5, 6}};
int *p = &matriz[0][0]; // p apunta al primer elemento (1)

// El elemento en la posición (i, j) se puede encontrar en:
// *(p + i * NUM_COLUMNAS + j)
int elemento_1_1 = *(p + 1 * 3 + 1); // Accede a matriz[1][1], que es 5
printf("Elemento [1][1] usando aritmética de apuntadores: %d\n", elemento_1_1);
```

## Arreglos Multidimensionales como Parámetros de Función

Cuando se pasa un arreglo multidimensional a una función, se debe especificar el tamaño de **todas las dimensiones excepto la primera**. Esto es necesario para que el compilador pueda calcular correctamente la ubicación de los elementos.

```c
// Forma 1: Notación de arreglo
void imprimir_matriz(int mat[][3], int filas) {
    for (int i = 0; i < filas; i++) {
        for (int j = 0; j < 3; j++) {
            printf("%d ", mat[i][j]);
        }
        printf("\n");
    }
}

// Forma 2: Notación de apuntador (más explícita)
void imprimir_matriz_ptr(int (*mat)[3], int filas) {
    // ... el cuerpo de la función sería idéntico ...
}

int main() {
    int mi_matriz[2][3] = {{10, 20, 30}, {40, 50, 60}};
    imprimir_matriz(mi_matriz, 2);
    return 0;
}
```

El parámetro `int mat[][3]` le dice al compilador: "mat es un arreglo de un número desconocido de filas, pero cada fila es un arreglo de 3 enteros". Sin el `3`, el compilador no sabría cómo saltar de `mat[i]` a `mat[i+1]`.

## Comparación con JavaScript

- **Arreglos de Arreglos**: En JavaScript, un arreglo multidimensional es literalmente un arreglo que contiene otros arreglos.
  ```javascript
  let matriz = [
    [1, 2, 3],
    [4, 5, 6, 7], // Las filas pueden tener longitudes diferentes (arreglos "jagged")
  ];
  console.log(matriz[1][3]); // 7
  ```
- **Flexibilidad vs. Rigidez**: Los arreglos en JS son mucho más flexibles. No se requiere que las "filas" internas tengan la misma longitud (se conocen como _jagged arrays_ o arreglos dentados). En C, un arreglo multidimensional es un bloque de memoria rectangular y rígido.
- **Gestión de Memoria**: Como siempre, JS gestiona la memoria automáticamente. En C, la estructura contigua de los arreglos multidimensionales es una optimización de memoria y rendimiento que el programador maneja explícitamente.

## Resumen

- Un arreglo multidimensional en C es un bloque de memoria contiguo organizado fila por fila.
- Se declara con `tipo nombre[filas][columnas]...;`.
- Al pasarlo a una función, se deben especificar todos los tamaños de dimensión excepto el primero para que la aritmética de apuntadores funcione.
- El nombre de un arreglo 2D `mat` es un apuntador a un arreglo 1D (ej. `int (*)[columnas]`).
- JavaScript ofrece una mayor flexibilidad con "arreglos de arreglos" que pueden tener longitudes de fila variables, a costa del control de memoria de bajo nivel que ofrece C.

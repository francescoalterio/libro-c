# 7.7. Ejemplo completo de manejo de archivos

A continuación, un ejemplo que muestra cómo abrir, escribir, leer y cerrar un archivo, manejando errores correctamente.

---

## Ejemplo

```c
#include <stdio.h>

int main() {
    FILE *fp = fopen("ejemplo.txt", "w");
    if (fp == NULL) {
        perror("No se pudo abrir el archivo para escribir");
        return 1;
    }
    fprintf(fp, "Hola, archivo!\n");
    fclose(fp);

    fp = fopen("ejemplo.txt", "r");
    if (fp == NULL) {
        perror("No se pudo abrir el archivo para leer");
        return 1;
    }
    char buffer[100];
    fgets(buffer, 100, fp);
    printf("Leído: %s", buffer);
    fclose(fp);
    return 0;
}
```

---

## Diferencias con JavaScript

- En JS (Node.js), el flujo sería similar pero usando funciones asíncronas o promesas.
- En C, el control es manual y secuencial.

---

## Resumen

- Este ejemplo integra apertura, escritura, lectura, cierre y manejo de errores en archivos.

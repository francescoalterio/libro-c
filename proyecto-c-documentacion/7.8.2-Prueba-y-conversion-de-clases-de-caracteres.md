# 7.8.2. Clasificación y Conversión de Caracteres (`<ctype.h>`)

La biblioteca `<ctype.h>` (de "character type") es una herramienta simple pero esencial en C para clasificar y convertir caracteres individuales. Estas funciones toman un `int` como argumento (que puede representar cualquier `char` o `EOF`) y devuelven un valor booleano (cero para falso, no cero para verdadero) para las funciones de clasificación, o el carácter convertido para las de conversión.

El comportamiento de estas funciones depende de la configuración regional (`locale`) actual, lo que les permite funcionar correctamente con diferentes conjuntos de caracteres más allá del ASCII básico.

## Funciones de Clasificación de Caracteres

Estas funciones permiten verificar si un carácter pertenece a una categoría específica. Son extremadamente útiles para la validación de entradas de usuario, el análisis de texto (parsing) y la implementación de lógica de control.

| Función       | Descripción (Devuelve verdadero si el carácter es...)                     |
| :------------ | :------------------------------------------------------------------------ |
| `isalnum(c)`  | Alfanumérico (`isalpha` o `isdigit`).                                     |
| `isalpha(c)`  | Alfabético (`isupper` o `islower`).                                       |
| `islower(c)`  | Una letra minúscula.                                                      |
| `isupper(c)`  | Una letra mayúscula.                                                      |
| `isdigit(c)`  | Un dígito decimal (0-9).                                                  |
| `isxdigit(c)` | Un dígito hexadecimal (0-9, a-f, A-F).                                    |
| `iscntrl(c)`  | Un carácter de control (ej. `\n`, `\t`).                                  |
| `isgraph(c)`  | Cualquier carácter imprimible excepto el espacio.                         |
| `isprint(c)`  | Cualquier carácter imprimible, incluyendo el espacio.                     |
| `ispunct(c)`  | Un carácter de puntuación (ni alfanumérico, ni de control, ni espacio).   |
| `isspace(c)`  | Un carácter de espacio en blanco (espacio, `\t`, `\n`, `\v`, `\f`, `\r`). |

**Ejemplo: Analizar una cadena de texto**

```c
#include <stdio.h>
#include <ctype.h>

void analizar_cadena(const char* str) {
    int letras = 0, digitos = 0, espacios = 0, puntuacion = 0;

    for (int i = 0; str[i] != '\0'; i++) {
        if (isalpha(str[i])) {
            letras++;
        } else if (isdigit(str[i])) {
            digitos++;
        } else if (isspace(str[i])) {
            espacios++;
        } else if (ispunct(str[i])) {
            puntuacion++;
        }
    }

    printf("Análisis de la cadena:\n");
    printf("- Letras: %d\n", letras);
    printf("- Dígitos: %d\n", digitos);
    printf("- Espacios: %d\n", espacios);
    printf("- Puntuación: %d\n", puntuacion);
}

int main() {
    analizar_cadena("¡Hola, Mundo! Este es un ejemplo en C para el año 2023.");
    return 0;
}
```

## Funciones de Conversión de Caracteres

Estas funciones se utilizan para cambiar la capitalización de las letras.

- `int tolower(int c)`: Si `c` es una letra mayúscula, devuelve su equivalente en minúscula. De lo contrario, devuelve `c` sin cambios.
- `int toupper(int c)`: Si `c` es una letra minúscula, devuelve su equivalente en mayúscula. De lo contrario, devuelve `c` sin cambios.

**Ejemplo: Normalizar una cadena a mayúsculas**

```c
#include <stdio.h>
#include <ctype.h>
#include <string.h>

void a_mayusculas(char* str) {
    for (int i = 0; str[i] != '\0'; i++) {
        str[i] = toupper(str[i]);
    }
}

int main() {
    char mi_cadena[] = "Este es un Texto Mixto.";
    a_mayusculas(mi_cadena);
    printf("Cadena en mayúsculas: %s\n", mi_cadena);
    // Salida: ESTE ES UN TEXTO MIXTO.
    return 0;
}
```

## Comparación con JavaScript

JavaScript no tiene una biblioteca equivalente a `<ctype.h>`, pero logra los mismos resultados a través de dos mecanismos principales: **expresiones regulares** y **métodos de cadena**.

| Tarea          | C (`<ctype.h>`)                                | JavaScript                                                                                                                            |
| :------------- | :--------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------ |
| **Clasificar** | `isalpha(c)`, `isdigit(c)`, `isspace(c)`, etc. | **Expresiones Regulares (Regex)**. Son mucho más potentes y flexibles. `/[a-zA-Z]/.test(char)`, `/\d/.test(char)`, `/\s/.test(char)`. |
| **Convertir**  | `toupper(c)`, `tolower(c)`.                    | **Métodos de cadena**. Las cadenas tienen métodos incorporados: `str.toUpperCase()`, `str.toLowerCase()`.                             |

**Ejemplo en JavaScript:**

```javascript
function analizarCadena(str) {
  let letras = (str.match(/[a-zA-Z]/g) || []).length;
  let digitos = (str.match(/\d/g) || []).length;
  let espacios = (str.match(/\s/g) || []).length;

  console.log(`Letras: ${letras}, Dígitos: ${digitos}, Espacios: ${espacios}`);
}

const miCadena = "¡Hola, Mundo! Este es un ejemplo en JS para el año 2023.";
analizarCadena(miCadena);

// Conversión
const mayusculas = miCadena.toUpperCase();
console.log(mayusculas);
```

## Resumen

- `<ctype.h>` es una herramienta fundamental y eficiente para el manejo de caracteres a bajo nivel en C.
- Sus funciones son la base para construir analizadores (parsers), validadores de datos y cualquier lógica que necesite inspeccionar caracteres uno por uno.
- Mientras que C ofrece un conjunto de funciones específicas y granulares, JavaScript se apoya en el poder de las expresiones regulares y los métodos de objeto para realizar tareas similares de una manera más abstracta y potente.

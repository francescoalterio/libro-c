# 7.8.6. Funciones Matemáticas (`<math.h>`)

La biblioteca `<math.h>` es la herramienta estándar en C para realizar operaciones matemáticas que van más allá de la aritmética básica. Proporciona un amplio conjunto de funciones para cálculos trigonométricos, hiperbólicos, exponenciales, logarítmicos, de potencias y de redondeo.

Casi todas las funciones en `<math.h>` operan con el tipo de dato `double` para máxima precisión. Existen versiones para `float` y `long double` que se distinguen por los sufijos `f` y `l` respectivamente (por ejemplo, `sqrtf()` para `float` y `sqrtl()` para `long double`).

## Compilación

En muchos sistemas tipo Unix (como Linux), es necesario enlazar explícitamente la biblioteca matemática al compilar. Esto se hace con la bandera `-lm`:

`gcc mi_programa.c -o mi_programa -lm`

El `-l` le dice al enlazador que busque una biblioteca, y `m` es el nombre de la biblioteca matemática (`libm`).

## Funciones Comunes

### Funciones de Potencias y Raíces

| Función       | Descripción                                                                           | Ejemplo                           |
| :------------ | :------------------------------------------------------------------------------------ | :-------------------------------- |
| `pow(x, y)`   | Calcula `x` elevado a la potencia `y` (x^y).                                          | `pow(2.0, 3.0)` devuelve `8.0`.   |
| `sqrt(x)`     | Calcula la raíz cuadrada no negativa de `x`.                                          | `sqrt(16.0)` devuelve `4.0`.      |
| `cbrt(x)`     | Calcula la raíz cúbica de `x`.                                                        | `cbrt(27.0)` devuelve `3.0`.      |
| `hypot(x, y)` | Calcula la hipotenusa de un triángulo rectángulo con catetos `x` e `y` (sqrt(x²+y²)). | `hypot(3.0, 4.0)` devuelve `5.0`. |

### Funciones Trigonométricas

Estas funciones esperan que los ángulos estén en **radianes**.

| Función       | Descripción                                                                              |
| :------------ | :--------------------------------------------------------------------------------------- |
| `sin(x)`      | Seno de `x`.                                                                             |
| `cos(x)`      | Coseno de `x`.                                                                           |
| `tan(x)`      | Tangente de `x`.                                                                         |
| `asin(x)`     | Arcoseno de `x`.                                                                         |
| `acos(x)`     | Arcocoseno de `x`.                                                                       |
| `atan(x)`     | Arcotangente de `x`.                                                                     |
| `atan2(y, x)` | Arcotangente de `y/x`, usando los signos de ambos para determinar el cuadrante correcto. |

**Ejemplo: Convertir grados a radianes y calcular el seno**

```c
#include <stdio.h>
#include <math.h>

#define PI 3.1415926535

int main() {
    double grados = 90.0;
    double radianes = grados * (PI / 180.0);
    double seno = sin(radianes);
    printf("El seno de %.1f grados es %.1f\n", grados, seno); // Imprime 1.0
    return 0;
}
```

### Funciones Exponenciales y Logarítmicas

| Función    | Descripción                                     |
| :--------- | :---------------------------------------------- |
| `exp(x)`   | Calcula `e` elevado a la potencia `x` (e^x).    |
| `log(x)`   | Calcula el logaritmo natural (base `e`) de `x`. |
| `log10(x)` | Calcula el logaritmo en base 10 de `x`.         |
| `log2(x)`  | Calcula el logaritmo en base 2 de `x`.          |

### Funciones de Redondeo y Valor Absoluto

| Función    | Descripción                                                   | Ejemplo                                                   |
| :--------- | :------------------------------------------------------------ | :-------------------------------------------------------- |
| `ceil(x)`  | Redondea `x` al entero más pequeño no menor que `x` (techo).  | `ceil(2.3)` devuelve `3.0`.                               |
| `floor(x)` | Redondea `x` al entero más grande no mayor que `x` (suelo).   | `floor(2.7)` devuelve `2.0`.                              |
| `round(x)` | Redondea `x` al entero más cercano.                           | `round(2.7)` devuelve `3.0`, `round(2.3)` devuelve `2.0`. |
| `trunc(x)` | Trunca `x` hacia cero, eliminando la parte decimal.           | `trunc(2.7)` devuelve `2.0`.                              |
| `fabs(x)`  | Calcula el valor absoluto de un número de punto flotante `x`. | `fabs(-5.5)` devuelve `5.5`.                              |

## Comparación con JavaScript

JavaScript proporciona una funcionalidad matemática muy similar a través del objeto estático `Math`. La principal diferencia es la sintaxis (uso de un objeto contenedor) y el hecho de que no es necesario incluir ni enlazar nada.

| Tarea              | C (`<math.h>`)                                              | JavaScript (`Math`)                                                          |
| :----------------- | :---------------------------------------------------------- | :--------------------------------------------------------------------------- |
| **Sintaxis**       | Funciones globales: `sqrt(x)`, `pow(x, y)`.                 | Métodos de un objeto estático: `Math.sqrt(x)`, `Math.pow(x, y)`.             |
| **Inclusión**      | Necesita `#include <math.h>` y a veces `-lm` al compilar.   | No necesita nada. El objeto `Math` está siempre disponible.                  |
| **Constantes**     | No definidas por defecto (se suelen definir con `#define`). | Proporciona constantes: `Math.PI`, `Math.E`.                                 |
| **Tipos de Datos** | Funciones separadas para `float`, `double`, `long double`.  | Todos los números son de 64 bits de punto flotante (equivalente a `double`). |
| **Hipotenusa**     | `hypot(x, y)`                                               | `Math.hypot(x, y)`                                                           |
| **Redondeo**       | `ceil(x)`, `floor(x)`, `round(x)`, `trunc(x)`               | `Math.ceil(x)`, `Math.floor(x)`, `Math.round(x)`, `Math.trunc(x)`            |

**Ejemplo en JavaScript:**

```javascript
// No se necesita importación
const grados = 90;
const radianes = grados * (Math.PI / 180);
const seno = Math.sin(radianes);
console.log(`El seno de ${grados} grados es ${seno}`); // 1

const raiz = Math.sqrt(16); // 4
const potencia = Math.pow(2, 3); // 8
```

## Resumen

- `<math.h>` es indispensable para cualquier programa en C que requiera cálculos científicos, de ingeniería o gráficos.
- Ofrece un control preciso sobre los tipos de datos de punto flotante (`float`, `double`, `long double`).
- Recuerda enlazar con `-lm` si tu compilador lo requiere.
- El modelo es muy similar al del objeto `Math` de JavaScript, que actúa como un contenedor para un conjunto casi idéntico de funcionalidades.
